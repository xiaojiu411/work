(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3141999d"],{"0714":function(t,s,e){},"6f3d":function(t,s,e){"use strict";var a=e("da7f");e.n(a).a},"817f":function(t,s,e){"use strict";e("c5f6");var a={props:{isShow:{type:Boolean,default:!1},width:{type:Number,default:600},height:{type:Number,default:500}},data:function(){return{}},computed:{styleObj:function(){return{width:"".concat(this.width,"px"),"max-height":"".concat(this.height,"px"),margin:"-".concat(this.height/2,"px 0 0 -").concat(this.width/2,"px")}}},methods:{closeMyself:function(){this.$emit("on-close")}}},i=(e("6f3d"),e("2877")),n=Object(i.a)(a,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"dialog-wrap"},[t.isShow?e("div",{staticClass:"dialog-cover",on:{click:t.closeMyself}}):t._e(),e("transition",{attrs:{name:"scale"}},[t.isShow?e("div",{staticClass:"dialog-content",style:t.styleObj},[e("p",{staticClass:"dialog-close",on:{click:t.closeMyself}},[t._v("×")]),t._t("default",[t._v("empty")])],2):t._e()])],1)])},[],!1,null,"1ab10b28",null);n.options.__file="dialog.vue",s.a=n.exports},"95da":function(t,s,e){"use strict";e.r(s),e("20d6"),e("7f7f"),e("ac6a");var a=e("cebc"),i=e("f6b5"),n=e.n(i),o=e("bcdf"),r=e.n(o),c=e("51761"),d=e.n(c),l=e("365c"),h=e("817f"),u=e("2f62"),m=e("c15b"),p=e("510f");n.a.use(r.a,{region:d.a,vueVersion:2});var v={mixins:[p.U,p.w],data:function(){return{addrList:[],flagAddrIndex:-1,isShowAddressDialog:!1,region:{province:"",city:"",district:""},title:"创建地址",address:"",name:"",phone:"",flag:!1,state:1,addressItem:{}}},computed:Object(a.a)({isComeFromDetail:function(){return"detail"===this.$route.query.comeFrom},isComeFromLuckyLottery:function(){return"luckyLottery"===this.$route.query.comeFrom},itemData:function(){return JSON.parse(this.$route.query.itemData||"{}")}},Object(u.b)(["userInfo"])),created:function(){this.addrListDom=null,this.isComeFromDetail||this.isComeFromLuckyLottery||!this.itemData.id||this.$router.push("/integral"),this._handleAddress()},methods:{setActiveClass:function(){var t=this;this.$nextTick(function(){t.addrListDom=t.$refs.addrList,t.addrListDom&&(t.addrListDom.forEach(function(t){t.classList.remove("active")}),-1<t.flagAddrIndex&&t.addrListDom[t.flagAddrIndex].classList.add("active"))})},selectItem:function(t,s){this.addrListDom.forEach(function(t){t.classList.remove("active")}),this.addrListDom[s].classList.add("active"),this.addressItem=t},closeDialog:function(t){this[t]=!1},openDialog:function(t){this[t]=!0},openAddrModule:function(t,s){if(this.state=t,this.addressItem=s,1===t&&(this.title="创建地址"),3===t&&(this.title="修改地址"),3===t){var e=s.province,a=s.city,i=s.district,n=s.flag,o=s.name,r=s.phone,c=s.address;this.region={province:e,city:a,district:i},this.address=c,this.name=o,this.phone=r,this.flag=1===n}else this.region={},this.address="",this.name="",this.phone="",this.flag="";this.openDialog("isShowAddressDialog")},saveAddr:function(){var t=this,s=this.region,e=s.province,a=s.city,i=s.district,n=e+a+i,o=this.address,r=this.flag?1:0,c=this.name,d=this.phone,h=this.state,u={state:h,id:"",province:e,city:a,district:i,area:n,address:o,flag:r,name:c,phone:d};3===h&&(u.id=this.addressItem.id),e&&a&&i&&o?c?m.a.phoneReg.test(d)?Object(l.Lb)(u).then(function(s){t.ERR_OK===s.code?(t.$message({type:"success",message:s.data}),t._handleAddress(),t.closeDialog("isShowAddressDialog")):t.$message({type:"warning",message:s.message})}):this.$message({type:"warning",message:"手机格式有误"}):this.$message({type:"warning",message:"请填写收款人姓名"}):this.$message({type:"warning",message:"请完善地址信息"})},deleteAddress:function(t,s){var e=this;this.$msgbox({type:"warning",title:"温馨提示",showCancelButton:!0,message:"您将永久删除该地址信息，您确定了？"}).then(function(a){if("confirm"===a){var i={state:2,id:t.id,province:"",city:"",district:"",area:"",address:"",flag:"",name:"",phone:""};Object(l.Lb)(i).then(function(t){e.ERR_OK===t.code?(e.$message({type:"success",message:t.data}),e.addrList.splice(s,1)):e.$message({type:"warning",message:t.message})})}}).catch(function(t){return t})},change:function(t){this.region=t},_handleAddress:function(){var t=this;Object(l.Lb)({state:4,id:"",province:"",city:"",district:"",area:"",address:"",flag:"",name:"",phone:""}).then(function(s){t.ERR_OK===s.code&&(t.addrList=s.data,t.flagAddrIndex=t.addrList.findIndex(function(t){return t.flag}),t.addressItem=t.addrList[t.flagAddrIndex]||{},t.setActiveClass())})}},watch:{},components:{VDialog:h.a}},g=(e("fd13"),e("2877")),f=Object(g.a)(v,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"exchangePage wrapper"},[e("div",{staticClass:"header"},[e("router-link",{attrs:{to:"/integral"}},[t._v("积分商城")]),t._v(" > "),e("span",{staticClass:"red"},[t._v(t._s(t.itemData.name))])],1),e("div",{staticClass:"main"},[e("div",{staticClass:"address-wrapper"},[e("h3",[t._v("选择地址")]),e("div",{staticClass:"address-list"},[t._l(t.addrList,function(s,a){return e("div",{ref:"addrList",refInFor:!0,staticClass:"item",on:{click:function(e){t.selectItem(s,a)}}},[e("div",{staticClass:"tit"},[e("i",{staticClass:"iconfont icon-gerenzhongxin"}),t._v("\n              "+t._s(s.name)+" 收\n            ")]),e("div",{staticClass:"body"},[e("i",{staticClass:"iconfont icon-weibiaoti-"}),e("p",[t._v(t._s(s.area+" "+s.address))])]),e("div",{staticClass:"bottom"},[e("i",{staticClass:"iconfont icon-shouji"}),e("span",[t._v(t._s(s.phone))]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){e.stopPropagation(),t.openAddrModule(3,s)}}},[t._v("修改")])]),e("i",{staticClass:"iconfont icon-2guanbi delete",on:{click:function(e){e.stopPropagation(),t.deleteAddress(s,a)}}})])}),e("div",{staticClass:"add-addr",on:{click:function(s){t.openAddrModule(1)}}},[e("i",{staticClass:"iconfont icon-icon02"}),e("span",[t._v("新增收货地址")])])],2)]),e("div",{staticClass:"exchangeProductInfo"},[e("h3",[t._v("确认兑换商品信息")]),e("div",[t.isComeFromDetail?e("table",{staticClass:"table"},[t._m(0),e("tbody",[e("tr",[e("td",[e("img",{staticClass:"thumb",attrs:{src:t.itemData.imageUrl,alt:""}})]),e("td",[e("span",{staticClass:"red"},[t._v(t._s(t.itemData.point))])]),e("td",[e("div",[e("p",[e("span",[t._v("商品积分：")]),e("span",[t._v(t._s(t.itemData.oldPoint)+" 分")])]),t._m(1),e("p",[e("span",[t._v("VIP优惠：")]),e("span",[t._v(t._s(t.itemData.promotion)+" 分")])])])])])]),e("tfoot",[e("tr",[t._m(2),e("td",[t._v("\n                兑换积分合计："),e("span",{staticClass:"red"},[t._v(t._s(t.itemData.point))]),t._v(" 分\n              ")])])])]):t._e(),t.isComeFromLuckyLottery?e("table",{staticClass:"table"},[t._m(3),e("tbody",[e("tr",[e("td",[e("img",{staticClass:"thumb",attrs:{src:t.itemData.imageUrl,alt:""}}),e("span",[t._v(t._s(t.itemData.name))])]),e("td",[t._v("\n                抽奖获得\n              ")])])]),t._m(4)]):t._e()]),e("div",{staticStyle:{"text-align":"right","margin-top":"15px"}},[e("el-button",{attrs:{type:"danger"},on:{click:t.exchangePhysical}},[t._v(t._s(t.isComeFromDetail?"立即兑换":"立即领取"))])],1)])])]),e("v-dialog",{attrs:{height:600,"is-show":t.isShowAddressDialog},on:{"on-close":function(s){t.closeDialog("isShowAddressDialog")}}},[e("div",{staticClass:"address-dialog"},[e("div",{staticClass:"dialog-header"},[e("h3",[t._v(t._s(t.title))])]),e("div",{staticClass:"dialog-body"},[e("div",{staticClass:"input-group"},[e("span",{staticClass:"label"},[t._v("所在地区")]),e("div",[e("region-picker",{attrs:{province:t.region.province,city:t.region.city,district:t.region.district},on:{onchange:t.change}})],1)]),e("div",{staticClass:"input-group"},[e("span",{staticClass:"label"},[t._v("详细地址")]),e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{minlength:"3",maxlength:"50"},domProps:{value:t.address},on:{input:function(s){s.target.composing||(t.address=s.target.value)}}})])]),e("div",{staticClass:"input-group"},[e("span",{staticClass:"label"},[t._v("收款人姓名")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})])]),e("div",{staticClass:"input-group"},[e("span",{staticClass:"label"},[t._v("手机号")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",maxlength:"11"},domProps:{value:t.phone},on:{input:function(s){s.target.composing||(t.phone=s.target.value)}}})])]),e("div",{staticClass:"input-group"},[e("span",{staticClass:"label"}),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.flag,expression:"flag"}],attrs:{id:"flag",type:"checkbox"},domProps:{checked:Array.isArray(t.flag)?-1<t._i(t.flag,null):t.flag},on:{change:function(s){var e=t.flag,a=s.target,i=!!a.checked;if(Array.isArray(e)){var n=t._i(e,null);a.checked?n<0&&(t.flag=e.concat([null])):-1<n&&(t.flag=e.slice(0,n).concat(e.slice(n+1)))}else t.flag=i}}}),e("label",{attrs:{for:"flag"}},[e("b",[t._v(" 设置为默认收货地址")])])])]),e("div",{staticClass:"input-group"},[e("span",{staticClass:"label"}),e("div",[e("el-button",{attrs:{type:"primary"},on:{click:t.saveAddr}},[t._v("保存")])],1)])])])])],1)},[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",[t._v("兑换商品")]),e("th",[t._v("兑换积分")]),e("th",[t._v("优惠方式")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("span",[this._v("活动优惠：")]),s("span",[this._v("0 分")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("td",{attrs:{colspan:"2"}},[s("p",[this._v("温馨提示：发货时以站内信通知您，将于一周内发货，收货信息经确认无法修改")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",[this._v("领取商品")]),s("th",[this._v("获得方式")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("tfoot",[s("tr",[s("td",{attrs:{colspan:"2"}},[s("p",[this._v("温馨提示：发货时以站内信通知您，将于一周内发货，收货信息经确认无法修改")])])])])}],!1,null,"326410b1",null);f.options.__file="integral-exchange.vue",s.default=f.exports},da7f:function(t,s,e){},fd13:function(t,s,e){"use strict";var a=e("0714");e.n(a).a}}]);